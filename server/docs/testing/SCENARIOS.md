# Career Agent Test Scenarios

A comprehensive guide to testing scenarios for understanding and validating career agent behavior.

## üìã Overview

This document provides an organized list of test scenarios based on the current test suite structure. Each scenario tests specific agent behaviors and helps validate the intelligent conversation flow.

## üéØ Agent Capabilities Being Tested

### Core Functions:
- **Add Experience**: Creating new work experiences
- **Add Project**: Adding projects to existing experiences  
- **Conversation Flow**: Multi-turn dialogues and clarifications
- **Duplicate Detection**: Handling similar/duplicate entries
- **Error Handling**: Graceful handling of edge cases

---

## üè¢ ADD EXPERIENCE SCENARIOS

### **Basic Scenarios** (`add-experience/basic-scenarios.test.ts`)
Tests core experience creation functionality

| Scenario | Input Example | Expected Behavior |
|----------|---------------|-------------------|
| **Complete Details** | "Add my Software Engineer role at TechCorp from January 2020 to December 2022" | ‚úÖ Creates experience with all fields |
| **Current Role** | "I started as Senior Developer at StartupCo in March 2023 and still work there" | ‚úÖ Creates experience without end date |
| **Rich Description** | "Add my Principal Engineer position at BigTech where I led ML platform development" | ‚úÖ Captures description details |
| **Minimal Details** | "Add my Developer role at WebCorp from 2019 to 2020" | ‚úÖ Handles sparse input |
| **Date Formats** | "Add my QA Engineer role at TestCorp from June 2018 to Aug 2019" | ‚úÖ Parses various date formats |
| **Well-known Company** | "I worked as Software Engineer at Google from 2017 to 2019" | ‚úÖ Handles recognizable companies |
| **Complex Titles** | "Add my Senior Full Stack Software Engineer role at InnovateTech" | ‚úÖ Processes multi-word titles |
| **Agent Response Quality** | Any successful addition | ‚úÖ Provides contextual, non-template responses |

### **Conversation Flow** (`add-experience/conversation-flow.test.ts`)  
Tests multi-turn conversations and clarification handling

| Scenario | Input Example | Expected Behavior |
|----------|---------------|-------------------|
| **Insufficient Details** | "I want to add my work experience" | ‚ùì Asks for company, role, dates |
| **Missing Company** | "Add my Software Engineer position that I started in 2021" | ‚ùì Asks which company |
| **Missing Role** | "I worked at Google from 2019 to 2021" | ‚ùì Asks what role/position |
| **Missing Dates** | "Add my Product Manager role at Apple" | ‚ùì Asks for start date |
| **Multi-turn Flow** | "I want to add a job" ‚Üí "Frontend Developer at Netflix from 2020-2022" | ‚úÖ Continues from clarification |
| **Vague References** | "Add my engineer role at the startup I worked at" | ‚ùì Asks for startup name |
| **Ambiguous Roles** | "Add the role I had at Microsoft" | ‚ùì Asks for specific role |
| **Interrupted Conversation** | Same thread ID after disconnect | ‚úÖ Resumes context |
| **Generic Requests** | "Help me add something to my work history" | üí° Provides helpful guidance |
| **Response Quality** | Any clarification request | ‚úÖ Contextual questions, not templates |

### **Edge Cases** (`add-experience/edge-cases.test.ts`)
Tests error handling and robustness

| Scenario | Input Example | Expected Behavior |
|----------|---------------|-------------------|
| **Invalid Dates** | "Add my Developer role at TechCorp from yesterday to tomorrow" | ‚ö†Ô∏è Handles gracefully, asks clarification |
| **Future Start Date** | "Add my Software Engineer role at FutureCorp starting in January 2027" | ‚ö†Ô∏è Questions future date |
| **Date Logic Error** | "Add my Manager role at LogicCorp from 2022 to 2020" | ‚ö†Ô∏è Catches inconsistent dates |
| **Long Company Name** | "Add my Engineer role at [200+ character company name]" | ‚úÖ Handles without errors |
| **Long Description** | Experience with 500+ word description | ‚úÖ Processes/truncates appropriately |
| **Special Characters** | "Add my Developer role at Tech@Co! & Partners #1 Solutions" | ‚úÖ Handles character encoding |
| **Empty Input** | "   " (whitespace only) | ‚úÖ Responds helpfully |
| **Conflicting Info** | "Add my current role as Engineer at Google that ended in 2020" | ‚ö†Ô∏è Identifies conflicts |
| **Multiple Experiences** | "Add my role at Google 2018-2020 and Manager at Facebook 2020-2022" | üìù Handles appropriately |
| **Robust Error Handling** | Various challenging inputs | ‚úÖ No crashes, meaningful responses |
| **Agent-driven Errors** | Any error scenario | ‚úÖ Contextual error messages |

### **Validation** (`add-experience/validation.test.ts`)
Tests data integrity and format validation

| Scenario | Input Example | Expected Behavior |
|----------|---------------|-------------------|
| **Required Fields** | Any valid experience | ‚úÖ All required fields present |
| **Date Format Consistency** | Various date inputs | ‚úÖ Consistent date storage |
| **Profile State Consistency** | After experience addition | ‚úÖ Profile remains valid |
| **Data Sanitization** | Input with extra whitespace/mixed case | ‚úÖ Clean, normalized data |
| **Experience ID Uniqueness** | Multiple experience additions | ‚úÖ All IDs unique |
| **Optional Fields** | With/without descriptions | ‚úÖ Handles optional data |
| **Current Experience** | "still work there" | ‚úÖ No end date set |
| **Database Persistence** | Experience addition | ‚úÖ Data persists correctly |
| **Array Ordering** | Multiple experiences | ‚úÖ Consistent ordering |
| **Response Quality** | Validation scenarios | ‚úÖ Meaningful success messages |

### **Duplicate Detection** (`add-experience/duplicate-detection.test.ts`)
Tests handling of similar/duplicate experiences

| Scenario | Input Example | Expected Behavior |
|----------|---------------|-------------------|
| **Potential Duplicate** | Same company/role, different dates | ‚ùì Confirms intention |
| **Different Roles** | Same company, different positions | ‚úÖ Recognizes as separate |
| **Similar Company Names** | "Google" vs "Google Inc" | ‚ùì Asks if same company |
| **Overlapping Dates** | Same company, overlapping time periods | ‚ö†Ô∏è Questions overlap |
| **Role Progression** | Junior ‚Üí Senior at same company | ‚úÖ Handles as progression |
| **Different Companies** | "Apple Corp" vs "Apple Inc" | ‚úÖ Treats as separate |
| **Exact Duplicate** | Identical experience details | ‚ö†Ô∏è Prevents/confirms duplicate |
| **Update vs Add** | Similar to existing with more details | üí° Suggests update |
| **Multiple Stints** | Same company, different time periods | ‚úÖ Recognizes as separate |
| **Agent-driven Detection** | Any duplicate scenario | ‚úÖ Intelligent, contextual responses |

---

## üìÅ ADD PROJECT TO EXPERIENCE SCENARIOS

### **Basic Scenarios** (`add-project-to-experience/basic-scenarios.test.ts`)
Tests core project addition functionality

| Scenario | Input Example | Expected Behavior |
|----------|---------------|-------------------|
| **Well-known Company** | "Add a Database Optimization project to my TechCorp experience" | ‚úÖ Finds experience, adds project |
| **Healthcare Context** | "Add a FHIR Integration project to my Optum healthcare experience" | ‚úÖ Domain-specific handling |
| **Minimal Details** | "Add a Security Audit project to TechCorp" | ‚úÖ Handles sparse input |
| **Rich Details** | "Add Microservices Architecture project using Docker, Kubernetes from Jan-Mar 2024" | ‚úÖ Captures all details |

### **Conversation Flow** (`add-project-to-experience/conversation-flow.test.ts`)
Tests project-specific conversation handling

| Scenario | Input Example | Expected Behavior |
|----------|---------------|-------------------|
| **Insufficient Details** | "Add a project to my work" | ‚ùì Asks for project and company details |
| **Missing Company** | "Add a machine learning project I worked on" | ‚ùì Asks which company/experience |
| **Continuation Flow** | "I want to add a project" ‚Üí "React dashboard at TechCorp with TypeScript" | ‚úÖ Continues conversation |
| **Project Type Clarification** | "Add the big project I did at Google" | ‚ùì Asks what kind of project |
| **Interrupted Resume** | Resume conversation with same thread | ‚úÖ Maintains context |
| **Ambiguous References** | "Add that API project we discussed" | ‚ùì Asks for clarification |
| **Helpful Guidance** | "Help me add something to my profile" | üí° Provides examples/guidance |

### **Multiple Roles** (`add-project-to-experience/multiple-roles.test.ts`)
Tests role-specific targeting when multiple roles exist at same company

| Scenario | Input Example | Expected Behavior |
|----------|---------------|-------------------|
| **Role-specific Request** | "Add project to ABCO when I was principal software engineer" | üéØ Targets correct role |
| **Semantic Search** | General ABCO search | üîç Finds multiple experiences |
| **Case Insensitive** | "abco" vs "ABCO" vs "Abco" | ‚úÖ Matches regardless of case |
| **Disambiguation** | Ambiguous company reference | ‚ùì Asks which role/period |

### **Novel Companies** (`add-project-to-experience/novel-companies.test.ts`)
Tests generalization beyond training examples

| Scenario | Input Example | Expected Behavior |
|----------|---------------|-------------------|
| **Meta/Facebook** | "Add React Native project to Meta experience" | ‚úÖ Handles novel company |
| **Netflix** | "Add Recommendation Algorithm project to Netflix" | ‚úÖ Data science context |
| **Spotify** | "Add Kubernetes Migration to Spotify DevOps role" | ‚úÖ Infrastructure context |
| **Stripe** | "Add Payment API project to Stripe backend role" | ‚úÖ Fintech context |
| **Adobe** | "Add Photoshop Plugin to Adobe Creative role" | ‚úÖ Creative software context |

### **Insufficient Details** (`add-project-to-experience/insufficient-details.test.ts`)
Tests handling of incomplete project information

| Scenario | Input Example | Expected Behavior |
|----------|---------------|-------------------|
| **Missing Project Name** | "Add to my Google experience" | ‚ùì Asks what project |
| **Missing Company** | "Add my React project" | ‚ùì Asks which company |
| **Vague Description** | "Add the thing I worked on" | ‚ùì Asks for specifics |
| **Multiple Missing** | "Add something" | ‚ùì Asks for all needed info |

### **Edge Cases** (`add-project-to-experience/edge-cases.test.ts`)
Tests error handling for project scenarios

| Scenario | Input Example | Expected Behavior |
|----------|---------------|-------------------|
| **Non-existent Company** | "Add project to CompanyThatDoesntExist" | üí° Suggests creating experience first |
| **Very Long Description** | Project with 1000+ character description | ‚úÖ Handles without errors |
| **Special Characters** | Project with emoji/symbols | ‚úÖ Proper encoding |
| **Empty Messages** | Whitespace-only input | ‚úÖ Helpful response |
| **Multiple Projects** | "Add React dashboard and Vue component" | üìù Handles appropriately |

---

## üîç AGENT BEHAVIOR VALIDATION

### **Response Quality Indicators**
All test scenarios validate that the agent provides:

- **Contextual Responses**: Mentions specific companies, roles, projects
- **Non-template Language**: Avoids generic "OK", "Success", "Error" messages  
- **Intelligent Clarifications**: Asks relevant follow-up questions
- **Helpful Guidance**: Provides examples when users are stuck
- **Professional Tone**: Maintains conversational, helpful demeanor

### **Expected Agent Capabilities**

| Capability | Description | Test Coverage |
|------------|-------------|---------------|
| **Natural Language Processing** | Understands varied input formats | ‚úÖ All scenarios |
| **Context Retention** | Maintains conversation state | ‚úÖ Multi-turn tests |
| **Semantic Search** | Finds relevant experiences/projects | ‚úÖ Multiple role tests |
| **Duplicate Detection** | Identifies similar entries | ‚úÖ Duplicate scenarios |
| **Data Validation** | Ensures data integrity | ‚úÖ Validation tests |
| **Error Recovery** | Handles edge cases gracefully | ‚úÖ Edge case tests |
| **Clarification Requests** | Asks for missing information | ‚úÖ Conversation flow tests |
| **Response Generation** | Provides contextual feedback | ‚úÖ All test categories |

---

## üöÄ Running Scenario Tests

### **Execute All Scenarios**
```bash
# Run all add-experience tests
npm test server/tests/add-experience/

# Run all add-project-to-experience tests  
npm test server/tests/add-project-to-experience/

# Run specific scenario category
npm test server/tests/add-experience/basic-scenarios.test.ts
npm test server/tests/add-project-to-experience/conversation-flow.test.ts
```

### **Individual Test Execution**
```bash
# Run specific test
npm test -- --testNamePattern="should add new experience with all required fields"

# Run with debugging
DEBUG=test:* npm test server/tests/add-experience/basic-scenarios.test.ts
```

---

## üìä Understanding Test Results

### **Success Indicators**
- ‚úÖ `result.updatedProfile === true` (Profile was modified)
- ‚úÖ Response contains specific context (company/role names)
- ‚úÖ Database state validates correctly
- ‚úÖ Agent provides meaningful feedback

### **Expected Clarification Patterns**
- ‚ùì "What company did you work at?"
- ‚ùì "What was your role/position?"
- ‚ùì "When did you start/end?"  
- ‚ùì "What kind of project was it?"
- ‚ùì "Can you provide more details?"

### **Quality Response Examples**
- üéØ "Successfully added your Software Engineer experience at Google!"
- üéØ "I found your TechCorp experience and added the Database Optimization project."
- üéØ "I see you have multiple roles at ABCO. Which position was this project for?"

---

This scenario guide helps developers and testers understand expected agent behavior across all conversation patterns, ensuring comprehensive validation of the career assistant's capabilities.